(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{261:function(e,t,n){e.exports=n(597)},280:function(e,t){},282:function(e,t){},298:function(e,t){},300:function(e,t){},525:function(e,t){},596:function(e,t,n){},597:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(257),c=n.n(i),s=n(599),o=n(30),l=n(31),u=n(33),d=n(32),m=n(34),p=n(79),f=n(13),h=n.n(f),b=n(56),v=n(55),g=n(158);n(589);g.initializeApp({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_API_KEY,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_DATABASE_URL,projectId:"gifstack",appId:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_APP_ID});var E=g.firestore(),O=function(e){return j("gifs",e)},S=function(){var e=Object(b.a)(h.a.mark(function e(t,n){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.collection(t),e.prev=1,e.next=4,a.add(n).then(function(e){return console.log("Gif added: ".concat(e.id))});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Error adding Gif");case 9:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(h.a.mark(function e(t){var n,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,a=E.collection(t).orderBy("time","desc"),e.next=5,a.get().then(function(e){e.forEach(function(e){var t=e.data();t.id=e.id,n.push(t)})}).then(function(){return n});case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),console.error("Error getting ".concat(t,"s from db"),e.t0),e.abrupt("return",n);case 12:case 13:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={gifs:[]},n.checkForUpdates=n.checkForUpdates.bind(Object(v.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"checkForUpdates",value:function(){if(!0===void E.collection("gifs").onSnapshot(function(e){e.docChanges().forEach(function(e){return!0})})){var e=O();this.setState({gifs:e})}}},{key:"componentDidMount",value:function(){var e=Object(b.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,O();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error retrieving GIFs form db: ",e.t0);case 10:return e.prev=10,this.setState({gifs:t}),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[1,7,10,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.gifs;return r.a.createElement("div",{className:"gifs"},e.map(function(e){return r.a.createElement("div",{key:e.id,className:"gifDiv card"},r.a.createElement("img",{className:"card-img",src:e.url,alt:e.url}))}))}}]),t}(a.Component),N=n(600),k=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={url:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({url:t})}},{key:"handleSubmit",value:function(){var e=Object(b.a)(h.a.mark(function e(t){var n,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=(new Date).getTime(),(a=this.state).time=n,e.next=6,S("gifs",a);case 6:this.setState({url:""}),this.props.history.push("/");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"gifUrlInput"},"Gif URL"),r.a.createElement("input",{name:"url",type:"text",className:"form-control",onChange:this.handleChange,value:this.state.url,id:"gifUrlInput","aria-describedby":"gifInputHelp",placeholder:"Enter Gif URL"}),r.a.createElement("small",{id:"gifInputHelp",className:"form-text text-muted"},"None of your user info will be shared or stored!.")),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))}}]),t}(a.Component),w=Object(N.a)(k),I="https://s3.amazonaws.com/onename/avatar-placeholder.png",U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return I}}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSignOut,n=e.userSession,a=this.state.person;return n.isSignInPending()?null:r.a.createElement("div",{className:"container body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-6 col-lg-4 align-middle"},r.a.createElement("div",{className:"panel-welcome card",id:"section-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"avatar-section"},r.a.createElement("img",{src:a.avatarUrl()?a.avatarUrl():I,className:"img-rounded avatar",id:"avatar-image",alt:""})),r.a.createElement("h1",null,"Hello, ",r.a.createElement("span",{id:"heading-name"},a.name()?a.name():"Nameless Person"),"!"),r.a.createElement("p",{className:"lead"},r.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signout-button",onClick:t.bind(this)},"Logout")))),r.a.createElement(w,null)),r.a.createElement("div",{className:"col-sm-12 col-md-6 col-lg-8"},r.a.createElement(y,null))))}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new p.Person(e.loadUserData().profile)})}}]),t}(a.Component),C=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return r.a.createElement("div",{className:"panel-landing",id:"section-1"},r.a.createElement("h1",{className:"landing-heading"},"Welcome to GifStack!"),r.a.createElement("p",{className:"lead"},r.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signin-button",onClick:e.bind(this)},"Start Sharing GIFs")))}}]),t}(a.Component),x=new p.AppConfig,D=new p.UserSession({appConfig:x}),_=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),D.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),D.signUserOut(window.location.origin)}},{key:"render",value:function(){return r.a.createElement("div",{className:"site-wrapper"},r.a.createElement("div",{className:"site-wrapper-inner"},D.isUserSignedIn()?r.a.createElement(U,{userSession:D,handleSignOut:this.handleSignOut}):r.a.createElement(C,{userSession:D,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;D.isSignInPending()&&D.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(a.Component);n(595),n(596);c.a.render(r.a.createElement(s.a,null,r.a.createElement(_,null)),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.0f0c2e5d.chunk.js.map