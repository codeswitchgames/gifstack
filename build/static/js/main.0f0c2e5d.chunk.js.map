{"version":3,"sources":["db/db.js","db/index.js","Feed.js","Components/Profile/AddGif.js","Components/Profile/Profile.js","Components/Signin/Signin.js","App.js","index.js"],"names":["firebase","apiKey","process","FIREBASE_API_KEY","databaseURL","FIREBASE_DATABASE_URL","projectId","appId","FIREBASE_APP_ID","db","getAllGifs","data","getData","addData","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","type","collection","wrap","_context","prev","next","add","then","docRef","console","log","concat","id","t0","error","stop","_x","_x2","apply","this","arguments","_ref2","_callee2","_context2","orderBy","get","querySnapshot","forEach","doc","temp","push","abrupt","sent","_x3","Feed","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","gifs","checkForUpdates","bind","assertThisInitialized","onSnapshot","snapshot","docChanges","change","setState","react_default","createElement","className","map","gif","key","src","url","alt","Component","AddGif","handleChange","handleSubmit","e","value","target","preventDefault","time","Date","getTime","history","onSubmit","htmlFor","name","onChange","aria-describedby","placeholder","withRouter","avatarFallbackImage","Profile","person","avatarUrl","_this$props","handleSignOut","userSession","isSignInPending","onClick","Profile_AddGif","Feed_Feed","Person","loadUserData","profile","Signin","handleSignIn","appConfig","AppConfig","UserSession","App","redirectToSignIn","signUserOut","window","location","origin","isUserSignedIn","Profile_Profile","Signin_Signin","handlePendingSignIn","userData","replaceState","document","title","ReactDOM","render","BrowserRouter","App_App","getElementById"],"mappings":"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","file":"static/js/main.0f0c2e5d.chunk.js","sourcesContent":["import * as firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nfirebase.initializeApp({\n  apiKey: process.env.FIREBASE_API_KEY,\n  // authDomain: process.env.FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.FIREBASE_DATABASE_URL,\n  projectId: \"gifstack\",\n  // storageBucket: process.env.FIREBASE_STORAGE_BUCKET,\n  // messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.FIREBASE_APP_ID\n});\n\nvar db = firebase.firestore();\n\nexport default db;\n","import db from './db';\n\nexport const getAllGifs = (data) => getData('gifs', data);\n\nexport const addGif = (data) => addData('gifs', data);\n\nexport const checkForGifs = () => {\n  db.collection(\"gifs\")\n    .onSnapshot(function(snapshot) {\n        snapshot.docChanges().forEach(function(change) {\n            return true;\n        });\n    });\n  }\n\nexport const addData = async (type, data) => {\n  let collection = db.collection(type);\n  try {\n    await collection.add(data).then(docRef => console.log(`Gif added: ${docRef.id}`));\n  } catch (e) {\n    console.error('Error adding Gif');\n  }\n};\n\nexport const getData = async (type) => {\n  let data = [];\n  try {\n    let collection = db.collection(type).orderBy(\"time\", \"desc\");\n    return await collection.get().then((querySnapshot => {\n      querySnapshot.forEach(doc => {\n        let temp = doc.data();\n        temp.id = doc.id;\n        data.push(temp);\n      });\n    })).then(() => data);\n  } catch (e) {\n    console.error(`Error getting ${type}s from db`, e);\n    return data;\n  };\n};\n","import React, { Component } from 'react';\nimport { getAllGifs, checkForGifs } from './db/index.js';\n\nexport default class Feed extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gifs: []\n    }\n    this.checkForUpdates = this.checkForUpdates.bind(this);\n  }\n  checkForUpdates(){\n    if (checkForGifs() === true){\n      let gifs = getAllGifs();\n      this.setState({gifs: gifs});\n    }\n  }\n  async componentDidMount(){\n    let gifs = [];\n    try {\n      gifs = await getAllGifs();\n    } catch (e) {\n      console.error('Error retrieving GIFs form db: ', e);\n    } finally {\n      this.setState({gifs: gifs})\n    }\n  }\n  render(){\n    let { gifs } = this.state;\n    return (\n      <div className=\"gifs\">\n        {gifs.map(gif => (\n          <div key={gif.id} className=\"gifDiv card\">\n            <img className=\"card-img\" src={gif.url} alt={gif.url}/>\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { addGif } from '../../db'\n\nclass AddGif extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: ''\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  handleChange(e){\n    let { target } = e;\n    let { value } = target;\n    this.setState({url: value})\n  }\n  async handleSubmit(e){\n    e.preventDefault();\n    let time = new Date().getTime();\n    let state = this.state;\n    state.time = time;\n    await addGif(state);\n    this.setState({url: ''});\n    this.props.history.push('/');\n  }\n  render(){\n    return (\n      <div className=\"container\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"gifUrlInput\">Gif URL</label>\n            <input name=\"url\" type=\"text\" className=\"form-control\" onChange={this.handleChange} value={this.state.url} id=\"gifUrlInput\" aria-describedby=\"gifInputHelp\" placeholder=\"Enter Gif URL\"/>\n            <small id=\"gifInputHelp\" className=\"form-text text-muted\">None of your user info will be shared or stored!.</small>\n          </div>\n          <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(AddGif);\n","import React, { Component } from 'react';\nimport {\n  Person,\n} from 'blockstack';\nimport Feed from '../../Feed';\nimport AddGif from './AddGif';\n\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\n\nexport default class Profile extends Component {\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n  \t  person: {\n  \t  \tname() {\n          return 'Anonymous';\n        },\n  \t  \tavatarUrl() {\n  \t  \t  return avatarFallbackImage;\n  \t  \t},\n  \t  },\n  \t};\n  }\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    return (\n      !userSession.isSignInPending() ?\n      <div className=\"container body\">\n        <div className=\"row\">\n          <div className=\"col-sm-12 col-md-6 col-lg-4 align-middle\">\n            <div className=\"panel-welcome card\" id=\"section-2\">\n              <div className=\"card-body\">\n                <div className=\"avatar-section\">\n                  <img src={ person.avatarUrl() ? person.avatarUrl() : avatarFallbackImage } className=\"img-rounded avatar\" id=\"avatar-image\" alt=\"\"/>\n                </div>\n                <h1>Hello, <span id=\"heading-name\">{ person.name() ? person.name() : 'Nameless Person' }</span>!</h1>\n                <p className=\"lead\">\n                  <button\n                    className=\"btn btn-primary btn-lg\"\n                    id=\"signout-button\"\n                    onClick={ handleSignOut.bind(this) }\n                  >\n                    Logout\n                  </button>\n                </p>\n              </div>\n            </div>\n            <AddGif/>\n          </div>\n          <div className=\"col-sm-12 col-md-6 col-lg-8\">\n          <Feed/>\n          </div>\n        </div>\n\n      </div>\n       : null\n    );\n  }\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n    });\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class Signin extends Component {\n\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">Welcome to GifStack!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={ handleSignIn.bind(this) }\n          >\n            Start Sharing GIFs\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Profile from './Components/Profile/Profile.js';\nimport Signin from './Components/Signin/Signin.js';\nimport {\n  UserSession,\n  AppConfig\n} from 'blockstack';\n\nconst appConfig = new AppConfig()\nconst userSession = new UserSession({ appConfig: appConfig })\n\nexport default class App extends Component {\n\n\n  handleSignIn(e) {\n    e.preventDefault();\n    userSession.redirectToSignIn();\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        <div className=\"site-wrapper-inner\">\n          { !userSession.isUserSignedIn() ?\n            <Signin userSession={userSession} handleSignIn={ this.handleSignIn } />\n            : <Profile userSession={userSession} handleSignOut={ this.handleSignOut } />\n          }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then((userData) => {\n        window.history.replaceState({}, document.title, \"/\")\n        this.setState({ userData: userData})\n      });\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}