{"version":3,"sources":["db/db.js","db/index.js","Feed.js","Components/Profile/AddGif.js","Components/Profile/Profile.js","Components/Signin/Signin.js","App.js","index.js"],"names":["firebase","apiKey","process","FIREBASE_API_KEY","databaseURL","FIREBASE_DATABASE_URL","projectId","appId","FIREBASE_APP_ID","db","addData","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","type","data","collection","wrap","_context","prev","next","add","then","docRef","console","log","concat","id","t0","error","stop","_x","_x2","apply","this","arguments","getData","_ref2","_callee2","_context2","get","querySnapshot","forEach","doc","temp","push","reverse","abrupt","sent","_x3","Feed","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","gifs","getAllGifs","setState","react_default","createElement","className","map","gif","key","src","url","alt","Component","AddGif","handleChange","bind","assertThisInitialized","handleSubmit","e","value","target","preventDefault","history","onSubmit","htmlFor","name","onChange","aria-describedby","placeholder","withRouter","avatarFallbackImage","Profile","person","avatarUrl","_this$props","handleSignOut","userSession","isSignInPending","onClick","Profile_AddGif","Feed_Feed","Person","loadUserData","profile","Signin","handleSignIn","appConfig","AppConfig","UserSession","App","redirectToSignIn","signUserOut","window","location","origin","isUserSignedIn","Profile_Profile","Signin_Signin","handlePendingSignIn","userData","replaceState","document","title","ReactDOM","render","BrowserRouter","App_App","getElementById"],"mappings":"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","file":"static/js/main.0a063482.chunk.js","sourcesContent":["import * as firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nfirebase.initializeApp({\n  apiKey: process.env.FIREBASE_API_KEY,\n  // authDomain: process.env.FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.FIREBASE_DATABASE_URL,\n  projectId: \"gifstack\",\n  // storageBucket: process.env.FIREBASE_STORAGE_BUCKET,\n  // messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.FIREBASE_APP_ID\n});\n\nvar db = firebase.firestore();\n\nexport default db;\n","import db from './db';\n\nexport const getAllGifs = (data) => getData('gifs', data);\n\nexport const addGif = (data) => addData('gifs', data);\n\nexport const addData = async (type, data) => {\n  let collection = db.collection(type);\n  try {\n    await collection.add(data).then(docRef => console.log(`Gif added: ${docRef.id}`));\n  } catch (e) {\n    console.error('Error adding Gif');\n  }\n};\n\nexport const getData = async (type) => {\n  let data = [];\n  try {\n    let collection = db.collection(type);\n    return await collection.get().then((querySnapshot => {\n      querySnapshot.forEach(doc => {\n        let temp = doc.data();\n        temp.id = doc.id;\n        data.push(temp);\n      });\n    })).then(() => data.reverse());\n  } catch (e) {\n    console.error(`Error getting ${type}s from db`, e);\n    return data;\n  };\n};\n","import React, { Component } from 'react';\nimport { getAllGifs } from './db/index.js';\n\nexport default class Feed extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gifs: []\n    }\n  }\n  async componentDidMount(){\n    let gifs = [];\n    try {\n      gifs = await getAllGifs();\n    } catch (e) {\n      console.error('Error retrieving GIFs form db: ', e);\n    } finally {\n      this.setState({gifs: gifs})\n    }\n  }\n  render(){\n    let { gifs } = this.state;\n    return (\n      <div className=\"gifs\">\n        {gifs.map(gif => (\n          <div key={gif.id} className=\"gifDiv card\">\n            <img className=\"card-img\" src={gif.url} alt={gif.url}/>\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { addGif } from '../../db'\n\nclass AddGif extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: ''\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  handleChange(e){\n    let { target } = e;\n    let { value } = target;\n    this.setState({url: value})\n  }\n  handleSubmit(e){\n    e.preventDefault();\n    addGif(this.state);\n    this.props.history.push('/')\n  }\n  render(){\n    return (\n      <div className=\"container\">\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"gifUrlInput\">Gif URL</label>\n            <input name=\"url\" type=\"text\" className=\"form-control\" onChange={this.handleChange} id=\"gifUrlInput\" aria-describedby=\"gifInputHelp\" placeholder=\"Enter Gif URL\"/>\n            <small id=\"gifInputHelp\" className=\"form-text text-muted\">None of your user info will be shared or stored!.</small>\n          </div>\n          <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(AddGif);\n","import React, { Component } from 'react';\nimport {\n  Person,\n} from 'blockstack';\nimport Feed from '../../Feed';\nimport AddGif from './AddGif';\n\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\n\nexport default class Profile extends Component {\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n  \t  person: {\n  \t  \tname() {\n          return 'Anonymous';\n        },\n  \t  \tavatarUrl() {\n  \t  \t  return avatarFallbackImage;\n  \t  \t},\n  \t  },\n  \t};\n  }\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    return (\n      !userSession.isSignInPending() ?\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-sm-12 col-md-6 col-lg-4\">\n            <div className=\"panel-welcome\" id=\"section-2\">\n              <div className=\"avatar-section\">\n                <img src={ person.avatarUrl() ? person.avatarUrl() : avatarFallbackImage } className=\"img-rounded avatar\" id=\"avatar-image\" alt=\"\"/>\n              </div>\n              <h1>Hello, <span id=\"heading-name\">{ person.name() ? person.name() : 'Nameless Person' }</span>!</h1>\n              <p className=\"lead\">\n                <button\n                  className=\"btn btn-primary btn-lg\"\n                  id=\"signout-button\"\n                  onClick={ handleSignOut.bind(this) }\n                >\n                  Logout\n                </button>\n              </p>\n            </div>\n            <AddGif/>\n          </div>\n          <div className=\"col-sm-12 col-md-6 col-lg-8\">\n          <Feed/>\n          </div>\n        </div>\n\n      </div>\n       : null\n    );\n  }\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n    });\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class Signin extends Component {\n\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">Welcome to GifStack!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={ handleSignIn.bind(this) }\n          >\n            Start Sharing GIFs\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Profile from './Components/Profile/Profile.js';\nimport Signin from './Components/Signin/Signin.js';\nimport {\n  UserSession,\n  AppConfig\n} from 'blockstack';\n\nconst appConfig = new AppConfig()\nconst userSession = new UserSession({ appConfig: appConfig })\n\nexport default class App extends Component {\n\n\n  handleSignIn(e) {\n    e.preventDefault();\n    userSession.redirectToSignIn();\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        <div className=\"site-wrapper-inner\">\n          { !userSession.isUserSignedIn() ?\n            <Signin userSession={userSession} handleSignIn={ this.handleSignIn } />\n            : <Profile userSession={userSession} handleSignOut={ this.handleSignOut } />\n          }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then((userData) => {\n        window.history.replaceState({}, document.title, \"/\")\n        this.setState({ userData: userData})\n      });\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}